<template>
  <Transition>
    <div v-if="loadingState.show" class="fixed w-dvw h-dvh top-0 left-0 z-[9999] flex justify-center items-center">
      <div class="fixed bg-gray-800 w-dvw h-dvh -z-10 opacity-50" />

      <section class="bg-white rounded-2xl p-50 m-20 w-full max-w-[600px] flex flex-col items-center">
        <svg width="150" height="150" viewBox="0 0 150 150" class="animate-spin">
          <path d="M85.7903 11.7319C85.7903 17.6908 80.9594 22.5215 75.0005 22.5215C69.0415 22.5215 64.2109 17.6908 64.2109 11.7319C64.2109 5.773 69.0415 0.942383 75.0005 0.942383C80.9594 0.942383 85.7903 5.773 85.7903 11.7319Z" fill="#0C55F8"/>
          <path opacity="0.47" d="M85.7903 138.266C85.7903 144.225 80.9594 149.056 75.0005 149.056C69.0415 149.056 64.2109 144.225 64.2109 138.266C64.2109 132.307 69.0415 127.477 75.0005 127.477C80.9594 127.477 85.7903 132.307 85.7903 138.266Z" fill="#0C55F8"/>
          <path opacity="0.92" d="M52.711 14.8137C55.6904 19.9743 53.9222 26.573 48.7616 29.5525C43.6011 32.5323 37.002 30.7641 34.0225 25.6035C31.0431 20.4426 32.8113 13.8438 37.9718 10.8643C43.1324 7.88484 49.7315 9.65303 52.711 14.8137Z" fill="#0C55F8"/>
          <path opacity="0.39" d="M115.978 124.397C118.958 129.557 117.19 136.156 112.029 139.136C106.868 142.115 100.27 140.347 97.2901 135.186C94.3106 130.026 96.0788 123.427 101.239 120.447C106.4 117.468 112.999 119.236 115.978 124.397Z" fill="#0C55F8"/>
          <path opacity="0.81" d="M26.1803 52.3531C31.1434 49.0551 32.4933 42.3582 29.1954 37.3951C25.8974 32.4321 19.2005 31.0822 14.2375 34.3801C9.27436 37.6781 7.92448 44.3749 11.2224 49.338C14.5204 54.3011 21.2173 55.651 26.1803 52.3531Z" fill="#0C55F8"/>
          <path opacity="0.3" d="M135.186 97.2891C140.347 100.269 142.115 106.867 139.136 112.028C136.156 117.189 129.557 118.957 124.397 115.977C119.236 112.998 117.468 106.399 120.447 101.238C123.427 96.0778 130.026 94.3096 135.186 97.2891Z" fill="#0C55F8"/>
          <path opacity="0.73" d="M11.7332 64.209C17.6921 64.209 22.5227 69.0396 22.5227 74.9988C22.5227 80.9577 17.6921 85.7884 11.7332 85.7884C5.77425 85.7884 0.943359 80.9577 0.943359 74.9988C0.943359 69.0396 5.77425 64.209 11.7332 64.209Z" fill="#0C55F8"/>
          <path opacity="0.22" d="M138.268 64.209C144.227 64.209 149.058 69.0396 149.058 74.9988C149.058 80.9577 144.227 85.7884 138.268 85.7884C132.309 85.7884 127.479 80.9577 127.479 74.9988C127.479 69.0396 132.309 64.209 138.268 64.209Z" fill="#0C55F8"/>
          <path opacity="0.64" d="M14.8146 97.2891C19.9752 94.3096 26.574 96.0778 29.5534 101.238C32.5329 106.399 30.7647 112.998 25.6042 115.977C20.4436 118.957 13.8448 117.189 10.8653 112.028C7.88584 106.867 9.65403 100.269 14.8146 97.2891Z" fill="#0C55F8"/>
          <path opacity="0.13" d="M124.397 34.0216C129.557 31.0422 136.156 32.81 139.136 37.9709C142.115 43.1315 140.347 49.7303 135.186 52.7098C130.026 55.6893 123.427 53.9211 120.447 48.7605C117.468 43.5999 119.236 37.0011 124.397 34.0216Z" fill="#0C55F8"/>
          <path opacity="0.56" d="M34.0225 124.397C37.002 119.236 43.6011 117.468 48.7616 120.447C53.9222 123.427 55.6904 130.026 52.711 135.186C49.7315 140.347 43.1324 142.115 37.9718 139.136C32.8113 136.156 31.0431 129.557 34.0225 124.397Z" fill="#0C55F8"/>
          <path opacity="0.05" d="M97.2901 14.8137C100.27 9.65303 106.868 7.88484 112.029 10.8643C117.19 13.8438 118.958 20.4426 115.978 25.6035C112.999 30.7641 106.4 32.5323 101.239 29.5525C96.0788 26.573 94.3106 19.9743 97.2901 14.8137Z" fill="#0C55F8"/>
        </svg>

        <div class="font-medium mt-20 text-gray-800">{{ loadingState.message || "Estamos procesando tu solicitud" }}</div>
        <div class="mt-3 text-gray-800">Por favor, espera...</div>
      </section>
    </div>
  </Transition>
</template>

<script setup lang="ts">
  const loadingState = useState<{ message: string; show: boolean; }>("loading", () => ({ message: "", show: false }));
</script>

<style scoped>
  .v-enter-active,
  .v-leave-active {
    transition: opacity 0.5s ease;
  }

  .v-enter-from,
  .v-leave-to {
    opacity: 0;
  }
</style>
